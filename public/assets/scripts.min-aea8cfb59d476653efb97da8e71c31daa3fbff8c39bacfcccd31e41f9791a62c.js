!function(e){"use strict";e.used="used";var t=function(e){e+=e>=98?.01:e>=90?.01:1,$(".loader").css({width:e+"%"}),a=setTimeout(function(){t(e)},200)},i=$("body"),n=$("[data-pagesetup]").data("pagesetup")[0],o="",a="",l="",r=location.pathname.substring(1),s,c="",d=$("#main"),h={prefetch:!0,cacheLength:2,debug:!1,scroll:!1,forms:null,onBefore:function(e){var t=document.createElement("a");t.href=e.prop("href"),l=t.pathname},onStart:{duration:0,render:function(e){$(".loader").css({width:"40%",opacity:"1"}),""===l&&(l=location.pathname);var t=l.substring(1).split("/");""===r?o="away":""===t[0]?o="home":"gallery"===r?"gallery"===t[0]&&t.length>1&&(o="over"):"gallery"===r.split("/")[0]&&r.split("/").length>1&&"gallery"===t[0]&&(o="under"),l=""}},onProgress:{duration:0,render:function(e){t(40)}},onReady:{duration:0,render:function(e,t){clearTimeout(a),$(".loader").css({width:"99%"});var i=t.filter(".container"),l=t.find(".header-nav"),r=$(".container"),d=$(".header-nav");r.css("min-height",r.height()>$(window).height()?r.height():$(window).height()),""===o&&(r.addClass("hide"),n.sticky&&Stickyfill.kill()),d.html(l.html()),""===o?setTimeout(function(){$("html, body").animate({scrollTop:0},0),r.html(i.html()),n=i.data("pagesetup")[0],k()},500):"over"===o?(s=i.find(".gallery-carousel"),s.addClass("hide"),r.append(s)):"under"===o?$(".galleries").length||(s=i.find(".galleries"),r.prepend(s)):"home"===o?(r.children().addClass("remove"),c=i.find(".overlay-nav"),c.addClass("hide"),r.append(c),$(".overlay-nav__bg").addClass("lazyload")):"away"===o&&r.prepend(i.children()),""!==o&&(n=i.data("pagesetup")[0],k())}},onAfter:function(){$(".loader").css({width:"100%"});var e=$(".container");""===o?setTimeout(function(){$(".container").removeClass("hide")},500):"over"===o?s.removeClass("hide"):"under"===o?($(".gallery-carousel").addClass("hide"),setTimeout(function(){$(".gallery-carousel").remove()},500)):"home"===o?(c.removeClass("hide"),setTimeout(function(){e.find(".remove").remove()},500)):"away"===o&&($(".overlay-nav").addClass("hide"),setTimeout(function(){$(".overlay-nav").remove(),$(".home-introduction").remove()},500)),setTimeout(function(){$(".container").css("min-height",""),o="",n.waypoints&&f(),n.progress&&g(),$(".header__wrapper--logo").css("outline",""),$(".loader").css({opacity:"0"}),setTimeout(function(){$(".loader").css({width:"0%"})},250)},500),r=location.pathname.substring(1)}},u=function(){var e={bg:$(".overlay-nav__bg"),links:$(".overlay-nav__items"),link:$(".overlay-nav__link"),active:null},t=function(t){e.active=$(t).parent().index(),e.bg.eq(e.active).addClass("overlay-nav__bg--show-bg"),e.link.addClass("overlay-nav__link--show-bg")},i=function(){e.bg.eq(e.active).removeClass("overlay-nav__bg--show-bg"),e.link.removeClass("overlay-nav__link--show-bg"),e.active=null};e.link.on({mouseenter:function(){t(this)},mouseleave:function(){i(this)}})};var f=function(){$(".fix-parent").length&&$(".fix-parent").each(function(t){var i=$(this),n=i.offset().top,o=i.height(),a=o/5+n;e.wayPoints[t]={$el:i,trg:a}})},g=function(){e.progLine={$el:$(".progress__meter"),full:$(document).height()-$(window).height()},m()},v=function(t){var i=e.progLine.full,n=t.scrollTop(),o=n/i*100;e.progLine.$el.width(o+"%")},m=function(){var t=$(document),i=t.scrollTop()+120;$(".progress").length&&v(t);for(var n=0;n<e.wayPoints.length;n++){var o=e.wayPoints[n].trg,a=e.wayPoints[n].$el;i>o?a.addClass("trg"):a.removeClass("trg")}};$(document).on("scroll",throttle(m,10));var p=function(e,t){$(e.selectedCell.element).data("x")>0?t.addClass("light"):t.removeClass("light")},y=function(){$(".has-video").length&&$(".has-video").each(function(){var e=$(this),t=e.find("iframe"),i=e.width()/t.width(),n=t.attr("width"),o=t.attr("height");t.attr({width:n*i,height:o*i}).addClass("sized")})},w=function(){if($(".timeline__wrapper").length){var e=$(".timeline__wrapper"),t=$(".controller");C=e.flickity({cellSelector:".timeline__event",initialIndex:e.data("start"),prevNextButtons:!1,pageDots:!1,accessibility:!1});var n=C.data("flickity"),o=n.slides.length-1,a=!1;C.on("staticClick.flickity",function(e,i,n,o){"number"==typeof o&&(C.flickity("select",o),t.val(o))}),C.on("dragStart.flickity",function(){a=!0}),C.on("settle.flickity",function(){a=!1,t.val(n.selectedIndex)}),C.on("scroll.flickity",throttle(function(e,i){if(!0===a){var n=100*Math.max(0,Math.min(1,i)),l=o/100*n;t.val(Math.round(l))}},100)),i.on("input",t,function(e){C.flickity("select",e.target.value)}),i.keydown(function(e){37===e.keyCode?(C.flickity("select",n.selectedIndex-1),t.val(n.selectedIndex)):39===e.keyCode&&(C.flickity("select",n.selectedIndex+1),t.val(n.selectedIndex))})}},_=function(){$("#introvid").on("ended",function(){setTimeout(function(){$(".intro-video, .video-bg").addClass("done"),$(".overlay-nav__bg").addClass("lazyload"),Cookies.set("sr_introState","viewed",{expires:86400}),setTimeout(function(){$(".intro-video, .video-bg").remove()},1e3)},2e3)}),$("#introvid").on("click",function(){$(".intro-video, .video-bg").addClass("done"),$(".overlay-nav__bg").addClass("lazyload"),Cookies.set("sr_introState","viewed",{expires:86400}),setTimeout(function(){$(".intro-video, .video-bg").remove()},1e3)})},k=function(){if(window.lazySizesConfig=window.lazySizesConfig||{},window.lazySizesConfig.loadMode=1,window.lazySizesConfig.expand=1,window.lazySizesConfig.expFactor=1.4,window.lazySizesConfig.hFac=.4,u(),n.timeline&&w(),n.instacarousel&&$(".insta-gal__gallery").flickity({cellSelector:".insta-gal__slide",prevNextButtons:!1,watchCSS:!0,contain:!0}),n.related&&$(".related-gal__gallery").flickity({cellSelector:".related-gal__slide",prevNextButtons:!1,watchCSS:!0,contain:!0}),n.artcarousel){var e=$(".article-carousel");e.find(".article-carousel__slide").length<=1&&e.addClass("no-slide"),e.flickity({cellSelector:".article-carousel__slide",prevNextButtons:!1,watchCSS:!0,contain:!0})}if(n.gallery&&$(".gallery-carousel").length){var t=$(".gallery-carousel").flickity({cellSelector:".gallery-carousel__slide",prevNextButtons:!0,groupCells:"100%",wrapAround:!0,autoPlay:4e3,pageDots:!1,contain:!0,setGallerySize:!1,arrowShape:"M59,73.8l3.8-4.4L40.5,50l22.3-19.4L59,26.2L33.2,48.6v2.9L59,73.8z"}),i=t.data("flickity"),o=$(".gallery-carousel__close");p(i,o),t.on("select.flickity",function(){p(i,o)})}n.masonry&&$(".colcade").colcade({columns:".colcade__col",items:".colcade__item"}),y(),n.intro&&_(),n.sticky&&$(".sticky").Stickyfill(),n.bgvideo&&$("#bgvid").length&&$("#bgvid").css("min-width","100.1%")};i.on("click",".restaurant__cover",function(){if($(document).width()<768){var e=$(this),t=e.parents(".restaurant");e.find(".rest-mob-header").toggleClass("rest-mob-header--hidden"),t.find(".restaurant__text").toggleClass("restaurant__text--visible"),$("body").animate({scrollTop:t.offset().top-$(".header").height()},500,function(){})}}),i.on("click",'a[href*="#"]:not([href="#"])',function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length){var t=$(".rest-anchors").length>0?$(".rest-anchors").outerHeight():0;return $("html, body").animate({scrollTop:e.offset().top-$(".header").height()-t},500),!1}}}),i.on("click",".footer__meta-link--up",function(){$("body").animate({scrollTop:0},500)}),i.on("submit",".footer__newsletter",function(e){var t=$(this),i=t.parent(),n=t.find("input");e.preventDefault(),$.getJSON(this.action+"?callback=?",$(this).serialize(),function(e){400===e.Status?(n.prop("title","Error: "+e.Message),i.addClass("error")):(n.removeProp("title"),i.removeClass("error").addClass("success"))})});var C;$(document).ready(function(){Cookies.defaults={path:"/",domain:window.location.hostname},k()}),e.wayPoints=[],$(window).on("load",function(){n.waypoints&&f(),n.progress&&g()}),$(window).on("resize",function(){y(),n.progress&&(e.progLine.full=$(document).height()-$(window).height())});var b=function(e){e.deltaX<0?C.flickity("previous"):e.deltaX>0&&C.flickity("next")},S=!1,x,z=0,T=function(e){S&&1===(z+=1)&&(S=!1,clearTimeout(x),b(e),x=setTimeout(function(){z=0},250))};$(document).on("mousewheel",function(e,t){if($(document).width()>=768){S=!0,Math.abs(t)>=40&&(t/=40);$(e.originalEvent.srcElement).parents(".timeline .flickity-viewport").length&&0!==e.deltaX&&(T(e,t),e.preventDefault(),e.stopPropagation())}})}(window.SR=window.SR||{});
//# sourceMappingURL=./scripts.min.js.map
;
